# 共识算法：区块链技术的根源

本文来自[101blockchains](https://101blockchains.com)，作者是Hasib Anwar。而本文是其[Consensus Algorithms: The Root Of The Blockchain Technology](https://101blockchains.com/consensus-algorithms-blockchain/)的中文翻译，翻译不到之处还请指正。也感谢Hasib Anwar的文章，非常值得一读。


## 引言

每一天，我们都可以看到新的区块链技术出现在我们生活当中。无论我们如何努力想要掌握最新的技术，却总是应接不暇。有没有想过所有这些区块链技术的根源是什么？好吧，共识算法是这些革命性技术的首要根源。

共识算法使得所有这些区块链共识序列不同于其他的算法。在同一个地方，区块链网络便利了成千上百万的人们。那么，为什么它们永远不会相互干预或者相互存在呢？

答案就在区块链网络的架构里。该架构设计巧妙，并且共识算法在该架构的最核心位置。

如果你真的想知道区块链共识序列是如何工作的，那么你必须要比你所想的要更为深入。这也就是为什么我将在本指南中涵盖已知的所有共识算法的内容。那么，让我们继续吧！


## 目录

- [第一章：什么是共识算法？](#第一章：什么是共识算法？)

- [第二章：拜占庭容错算法的问题](#第二章：拜占庭容错算法的问题)

- [第三章：我们为什么需要共识算法？](#第三章：我们为什么需要共识算法？)

- [第四章：区块链：分布式网络中有组织的数据的框架](#第四章：区块链：分布式网络中有组织的数据的框架)

- [第五章：共识算法：网络的灵魂](#第五章：共识算法：网络的灵魂)

- [第六章：不同类型的共识算法](#第六章：不同类型的共识算法)
        
- [第七章：其他类型的共识算法](#第七章：其他类型的共识算法)

- [第八章：结论](#第八章：结论)


## 第一章：什么是共识算法？

技术定义可能是这样的：

共识算法是一个组的决策过程，组中的个体构建并支持最适合组中其余个体的决策。这是一种解决方案，个体需要支持多数决策，无论它们是否喜欢。

简单来讲，它就是一种组内决定的方法。我举一个例子你就更明白了。想象一个有10个人的小组，想要就项目于他们个人的利益做一个决定。每个人都可以提出一个观点，但是大多数将同意其中的一个最为有用的想法，而其他人必须接受这个决定，无论他们喜欢与否。

现在想象下这样的一个决定对于1000个人来说的情况。难道这不会使得决策变得更加艰难吗？

共识算法不仅仅是赞同大多数的投票，而且还要同意对全体都有利的那个。因此，它总会在网络中取胜。

区块链共识模型是在互联网世界里创造公平和公正的一种方法。用于这种协定的共识系统我们称其为共识定理。

这些区块链共识模型由一些特殊的对象组成，例如：

- 达成协议：该机制尽可能多的收集组内的所有协议。

- 协作：小组成员都希望达成更好的协议，以此产生对整个小组更好的利益。

- 合作：每个个体都将团结一致，而把自己的利益放在一边。

- 平等权利：每个参与者在投票中都有相同的价值，这意味着每个人的投票都很重要。

- 参与：每个在网络中的个体都需要参与投票。不会有人将被遗漏，更不会有人可以不投票就留在外面。

- 活动：小组中的每个成员都同样活跃，没有哪个成员将负有更多的责任。

**Different Types of Consensus Algorithms Infographic**

![Different Types of Consensus Algorithms Infographic](https://github.com/i0Ek3/YGP/blob/master/image/Different_Consensus_Algorithms.png)


## 第二章：拜占庭容错算法的问题

拜占庭容错是一种具有特定故障时间的系统，它被称为拜占庭将军问题，你可以通过分布式计算机系统来更好地体验这种情形。很多时候，共识系统可能会出现故障。

这些组件将进一步解决冲突的信息，只要所有要素协调一致，共识系统才能成功地运行。然而，如果系统中的一个组件出现故障，则整个系统将会发生故障。

故障成分总是会导致拜占庭容错系统不一致，这也就是为什么它对于使用共识算法的去中心化网络而言不是理想的原因了。

专家们称它为“拜占庭将军问题”，仍然疑惑吗？

让我用一个共识的例子来讲清楚它。

想象一下这里有一组将军，他们每个人都拥有一支拜占庭军队。他们准备去攻占一个城邦，并且他们需要决定如何展开攻击。

你可能认为这很轻松。然而，却有一点点困难。将军们只可以通过信使来沟通，并且这里有些叛徒将军试图破坏整个攻击。

他们可以通过信使来发送不可靠消息，或者信使也可以成为叛徒。

信使也可以通过传送错误的消息来故意破坏。

这就是为什么这个问题需要被谨慎处理的原因了。首先，无论如何我们都需要将军们互相达成决定。第二，确保即使是最少的叛徒数量也不会使的整个任务失败。

这对你来说可能相当简单，然而，并不是这样。根据研究，在有n个叛徒的将军中，需要有3n+1个将军是诚实的。也就是说，需要有4名将军来对应一个叛徒，这的确有些棘手。



## 第三章：我们为什么需要共识算法？

拜占庭主要的问题是达成协议。如果出现单点故障，则所有节点无法达成协议或者获得一个更高的难度值。

另一方面，共识算法并不真正面对这类问题。他们的主要目标是以任何方式达到特定的目标。区块链共识算法模型是比拜占庭更可信任和更具容错性的。

这就是为什么在分布式系统中会有矛盾的结果；而用一致性算法便是为了有一个更好的输出。



## 第四章：区块链：分布式网络中有组织的数据的框架

现在让我们来窥探一下区块链技术，以便更好地了解整个网络。

* 它是组织数据库的一种新方法。
* 它可以存储根据网络变化的所有内容。
* 所有数据就像物品一样整齐的排列在块中。

然而，你却无法在区块链本身上看到任何去中心化。这是因为区块链并不提供去中心化的环境。这就是我们需要共识算法来使得系统变得去中心化的原因了。

所以，区块链技术只允许你创建一个不同的结构化数据库，但是它并不执行去中心化进程。这就是为什么区块链被认为是整个去中心化网络里的骨架了。

 
## 第五章：共识算法：网络的灵魂

方法是真的很简单。这些区块链共识模型仅仅是达成协议的方式。但是，如果没有共同的共识算法，就不可能有任何的去中心化系统。

它甚至不需要在意节点之间是否会彼此信任。他们必须遵守确定的原则并且来达成集体协议。为此，你必须检查所有的共识算法。

目前，我们还没有发现任何适用于每种区块链技术的特定区块链算法。让我们见识一下不同的区块链共识算法，以便更好地了解整个情况。


## 第六章：不同类型的共识算法

原文列出的共识算法：

* PoW--工作量证明
* PoS--股权证明
* DPoS--委托股权证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/058.pdf)
* LPoS--租赁股权证明
* PoET--时间消逝证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/062.pdf)
* PBFT--实用拜占庭容错
* SBFT--简单拜占庭容错
* DBFT--委托拜占庭容错
* DAG--有向无环图
* PoA--活动证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/064.pdf)
* PoI--重要性证明
* PoCapcity--容量证明
* PoB--出生证明？
* PoWeight--权值证明

笔者列出的共识算法：

* Bitcoin-NG
* Casper
* Tendermint
* Raft [动画演示](http://thesecretlivesofdata.com/raft/)
* Paxos
* PoL--幸运证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/030.pdf)
* PoP--可能性证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/035.pdf)
* PoV--投票证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/052.pdf)
* PoT--信任证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/056.pdf)
* PoContribution--贡献证明 [参考](https://github.com/i0Ek3/YGP/blob/master/paper/readed/057.pdf)
        
## 第七章：其他类型的共识算法



## 第八章：结论

正是共识算法使得区块链网络的本质变得如此通用。是的，没有一个共识算法可以被区块链称之为是完美的。但这就是我们猜测的技术之美--不断变化的改善。

如果这些共识算法没有出现，我们可能仍然依赖着PoW共识机制，无论你是否喜欢，PoW都会威胁到区块链的去中心化和分布性。

区块链技术的整个想法便是为了去中心化和对抗专制，现在正是该普通人制止腐败和错误系统的时候了。

我们迫不及待地等待更好的共识算法，这些算法将改变我们的生活，共创美好的明天。









