# Homework

### 问题描述

即将一个不规则几何体映射到一个规则的平面图形的边上，并保持对应的点距不变。

问：如何实现该算法，或者思路描述。

### 对于该问题，前人所做的工作

#### Ricci Flow

> Ricci流是意大利数学家里奇（Gregorio Ricci）命名的一个方程。用它可以完成一系列的拓扑手术，构造几何结构，把不规则的流形变成规则的流形，从而解决三维的庞加莱猜想。

##### 优点：

曲面单值化定理：所有带度量的封闭曲面都可以保角地映到三种标准空间中的一种：球面，欧氏平面，双曲平面。 曲面里奇流方法,它适用于任何拓扑和任何目标曲率。离散曲面Ricci流提供了设计黎曼度量强有力的一种工具。

##### 缺点：

因为里奇流不保留体积，所以要小心操作，在将里奇流应用于统一化和几何化时，需要对里奇流进行规范化，以获得一个保持体积的流, 如果做不到这一点，我们可能只是缩小它的大小。

### 本文提供的相关方法

- 保距映射

  > 等距映射(isometry)是[黎曼流形](https://baike.baidu.com/item/%E9%BB%8E%E6%9B%BC%E6%B5%81%E5%BD%A2)间保持弧长的[映射](https://baike.baidu.com/item/%E6%98%A0%E5%B0%84/20402621)。设(A，d)与(B，e)为两个度量空间。称从A到B中的映射f是等距映射，如果它保持距离，即是说，如果对A的任一点偶(x，y)，有 e(f(x)，f(y))=d(x，y)。

- 共形（保角）映射

  > 共形映射是复变函数论的一个分支，它从几何的观点来研究复变函数，其通过一个解析函数把一个区域映射到另一个区域进行研究。这个性质可以将一些不规则或者不好用数学公式表达的区域边界映射成规则的或已成熟的区域边界。

- 数据降维之多维缩放（MDS）

  > 多维缩放（Multidimensional Scaling, MDS）是一组对象之间的距离的可视化表示，也可以当做一种无监督降维算法使用。

- 高斯曲率

  > 利用隐函数定理将曲面用二元函数f的图像来表示，并且假设点p为临界点，也即f在该点的梯度为0（这总是可以通过适当的刚体运动来实现）。然后p点的高斯曲率就是f在点p的 黑塞矩阵（二阶导数组成的2x2矩阵）的行列式。

- 曲面参数化

  > 纹理贴图技术在数学上等价于求从曲面到平面区域的一个光滑双射，这被称为是所谓的曲面参数化问题。
  > 
  > 在图形渲染过程中，两条流水线的处理结果相互融合，将平面的二维纹理粘贴到弯曲的三维曲面上，这一技术被称为是纹理贴图。

- 用OpenGL实现的纹理映射  

  > 具体介绍见下文。

### 针对上述中的几种方法的具体介绍：

- 共形（保角）映射

  > 思路：共形映射具有一种非常重要的性质：旋转角不变性和伸缩率不变性，也就是说，几何图形经过共形变换后，它的整体外形发生改变，但是又局部的保持一定的刚体性质，这种刚性可以满足几何造型设计的中的刚性要求。
  > 
  > 显示了从人脸曲面到单位圆盘的调和映射和共形映射。两个映射非常接近，但是如果我们仔细考察，我们发现在调和映射中，平面上的小圆被拉回到曲面上成为小椭圆（偏心率接近0）；在共形映射中，平面上的小圆被拉回到曲面上成为小圆。通常情况下，共形映射一定是调和的，调和映射不一定是共形的。在上图情形，当我们固定边界映射，优化调和能量，我们得到调和映射。如果，我们放开边界，令边界的像在单位圆上可以自由滑动，从而进一步减小调和能量，则我们得到共形映射。换言之，共形映射是所有调和映射中调和能量最小者。
  > 
  > ![共形映射](https://i.loli.net/2018/06/06/5b1749c0c0385.png)
  > 
  > ![调和映射](https://i.loli.net/2018/06/06/5b1749917309d.png)

  > 上图显示了从人脸曲面到单位圆盘的调和映射和共形映射。两个映射非常接近，但是如果我们仔细考察，我们发现在调和映射中，平面上的小圆被拉回到曲面上成为小椭圆（偏心率接近0）；在共形映射中，平面上的小圆被拉回到曲面上成为小圆。
  > 
  > 通常情况下，共形映射一定是调和的，调和映射不一定是共形的。在上图情形，当我们固定边界映射，优化调和能量，我们得到调和映射。如果，我们放开边界，令边界的像在单位圆上可以自由滑动，从而进一步减小调和能量，则我们得到共形映射。换言之，共形映射是所有调和映射中调和能量最小者。  
  > 
  > 但是，对于球面而言，拓扑球面间的调和映射一定是共形的。直观来说，拓扑球面间的映射可以在球面上自由滑动，从而使调和能量无障碍地达到最优，从而得到共形映射。下面，我们将这一直觉述诸严格的证明。我们定义曲面间映射所诱导的二次微分，霍普夫微分：
  > 
  > ![5b174b91515b1](https://i.loli.net/2018/06/06/5b174b91515b1.png)
  > 
  > 我们可以证明，如果霍普夫微分全纯，则映射必为调和；如果霍普夫微分为0，则映射必为共形。
  > 
  > 曲面上所有的全纯二次微分构成一个群，根据黎曼-罗赫定理，亏格为g>1的曲面，这个群的维数为6g-6。黎曼-罗赫定理是指标定理的特殊形式，本质上是说流形上椭圆型偏微分方程解的空间维数被流形拓扑决定。  
  > 
  > 拓扑球面上所有的全纯二次微分必然为0。假如球面上存在一个全纯二次微分，那么它诱导一个带有奇异点的平直度量，奇异点对应着全纯二次微分的零点，因此奇异点处的曲率测度为-180度。根据高斯博内定理，总曲率等于球面的欧拉示性数乘以360度，从而奇异点的个数为0，全纯二次微分没有零点。我们能够取其平方根的一个分支，得到一个全纯1-形式。球面上的全纯1-形式的实部为调和1-形式。因为球面的一阶上同调群为0，所以调和1-形式必为0，进而全纯二次微分必为0。  
  > 
  > 因此，拓扑球面间的所有的调和映射，其霍普夫微分为全纯二次微分，必然为0。我们得到拓扑球面间的所有调和映射必为共形映射。

- 数据降维之多维缩放

  > 思路：应该可以看作是一种低维嵌入，要求保持距离，实际上就是“多维缩放”。

- 曲面参数化

  > 思路：把问题降为三维曲面上的点向二维投影，那问题就可以转化成曲面参数化问题了(ARAP 等)，把保角保距分别计入损失函数，解最优化问题。

- 用OpenGL实现的纹理映射

将每个三维网格映射到平面坐标中，UV坐标从纹理图像中加载像素：

![5b174100e6779](https://i.loli.net/2018/06/06/5b174100e6779.png)

参数化：

![5b174125c64b9](https://i.loli.net/2018/06/06/5b174125c64b9.png)

![5b17413756ebe](https://i.loli.net/2018/06/06/5b17413756ebe.png)

在实践中的纹理映射：将三维与二维纹理坐标相关联。

OpenGL代码片段：

![5b174152a7415](https://i.loli.net/2018/06/06/5b174152a7415.png)

### 参考

> https://hadroncfy.com/2016/07/24/conformal-transformations/
> 
> https://ccjou.wordpress.com/2014/06/25/%E4%BF%9D%E9%95%B7%E3%80%81%E4%BF%9D%E8%A7%92%E8%88%87%E5%85%B1%E5%BD%A2%E6%98%A0%E5%B0%84/
> 
> https://en.wikipedia.org/wiki/Ricci_flow
> 
> https://www.cnblogs.com/lochan/p/6627511.html
> 
> https://blog.csdn.net/victoriaw/article/details/78500894
> 
> http://www.360doc.com/content/17/0214/23/32196507_629053190.shtml
